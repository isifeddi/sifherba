#include "fillit.h"

int     ft_valid_line(char *str)
{
	int		i;

	i = 0;
	if (ft_strlen(str) != 4)
		
	{
		ft_putstr("one line is invalid");
		return(0);
	}
	while (str[i])
	{
		if (str[i] != '#' && str[i] != '.')
		{
			ft_putstr("one line is invalid");
			return (0);
		}
		i++;
	}
	return (1);
}


int		ft_read_file(const int fd, t_lst *tetri)
{
	char	*str;
	int		i;
	int		nd;
//	t_lst	*tmprr;

	nd = 1;
//	tmprr = *tetri;
	tetri = ft_lst_new();
	while (nd > 0)
	{
		i = 0;
		while (i < 4 && (nd = get_next_line(fd,&str)) > 0)
		{
			if(!ft_valid_line(str))
			{
				ft_putstr("error d une ligne invalide");
				return (0);
			}
			tetri->tet[i] = str;
			ft_putstr(tetri->tet[i]);
			ft_putstr("\n");
			i++;
		}
		if (get_next_line(fd, &str) > 0 && str[0])
		{
			ft_putstr("error i l ya pas de line vide");
			return (0);
		}
	/*tmprr =*/ ad_lst_addend(tetri, ft_lst_new());
		tetri = tetri->next;
		ft_putstr(tetri->tet[0]);
	}
//	ft_print_lst(tmprr);
	return (1);
}

